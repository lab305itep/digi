#include <stdio.h>
#include <time.h>
#include <TH1.h>

#define N_OCTOBER 35
void do_october2(void)
{
	const char t_period[N_OCTOBER][3][20] = {
		{"30.09.2016 13:22", "02.10.2016 11:52", "5469_6172"},
		{"02.10.2016 11:52", "04.10.2016 13:50", "5469_6172"},
		{"04.10.2016 14:00", "07.10.2016 17:50", "5469_6172"},
		{"07.10.2016 18:00", "10.10.2016 13:15", "5469_6172"},
		{"10.10.2016 13:25", "12.10.2016 11:35", "5469_6172"},
		{"12.10.2016 11:45", "14.10.2016 18:05", "5540_6583"},
		{"14.10.2016 18:15", "17.10.2016 12:35", "6173_6694"},
		{"17.10.2016 12:45", "19.10.2016 14:20", "6173_6694"},
		{"19.10.2016 14:30", "21.10.2016 15:20", "6173_6694"},
		{"21.10.2016 15:30", "23.10.2016 15:00", "6173_6694"},
		{"23.10.2016 15:00", "24.10.2016 12:50", "6664_8469"},
		{"24.10.2016 13:00", "26.10.2016 19:20", "6664_8469"},
		{"26.10.2016 19:30", "28.10.2016 14:53", "6664_8469"},
		{"28.10.2016 15:04", "31.10.2016 13:26", "6664_8469"},
		{"31.10.2016 13:27", "02.11.2016 12:39", "6664_8469"},
		{"02.11.2016 13:23", "04.11.2016 14:25", "6664_8469"},
//		{"04.11.2016 14:41", "07.11.2016 14:12", "6664_8469"},
//		{"07.11.2016 14:29", "09.11.2016 11:55", "6664_8469"},
		{"09.11.2016 12:06", "11.11.2016 19:02", "6664_8469"},
		{"11.11.2016 19:18", "14.11.2016 14:28", "6664_8469"},
		{"14.11.2016 14:47", "16.11.2016 12:59", "6664_8469"},
		{"16.11.2016 13:20", "18.11.2016 16:50", "6664_8469"},	// approximate time
		{"18.11.2016 17:09", "21.11.2016 15:11", "6664_8469"},
		{"21.11.2016 15:27", "23.11.2016 13:16", "6664_8469"},
		{"23.11.2016 14:03", "25.11.2016 17:43", "6664_8469"},
		{"25.11.2016 18:35", "28.11.2016 13:46", "6664_8469"},
//		{"28.11.2016 14:05", "29.11.2016 14:39", "6664_8469"},
//		{"29.11.2016 15:25", "30.11.2016 11:17", "6664_8469"},
//		{"30.11.2016 16:43", "01.12.2016 01:30", "6664_8469"},
		{"01.12.2016 01:30", "02.12.2016 19:46", "8470_10005"},
		{"02.12.2016 19:58", "05.12.2016 14:15", "8470_10005"},
		{"05.12.2016 14:30", "07.12.2016 10:51", "8470_10005"},
		{"07.12.2016 11:27", "09.12.2016 17:37", "8470_10005"},
//		{"09.12.2016 17:49", "12.12.2016 15:01", "8470_10005"},
		{"12.12.2016 15:49", "14.12.2016 11:10", "8470_10005"},
		{"14.12.2016 11:39", "16.12.2016 17:17", "8470_10005"},
		{"16.12.2016 17:22", "19.12.2016 14:38", "8470_10005"},
		{"19.12.2016 15:01", "21.12.2016 13:07", "8470_10005"},
		{"21.12.2016 13:34", "23.12.2016 17:15", "8470_10005"},
		{"23.12.2016 17:21", "24.12.2016 13:40", "8470_10005"},
		{"24.12.2016 14:40", "26.12.2016 13:10", "8470_10005"}
	};
	
	int i;
	TH1D *h[N_OCTOBER];
	char str[64];
	double val, err;
	char fn[256];
	char fr[256];
	
	for (i=0; i<N_OCTOBER; i++) {
		sprintf(str, "PositronEnergy_p%d", i+1);
		sprintf(fn, "danss_root/%s.root", t_period[i][2]);
		sprintf(fr, "danss_root/%s_r.root", t_period[i][2]);
		h[i] = spectr3(fn, fr, str, getunixtime(t_period[i][0]), getunixtime(t_period[i][1]), 0.025);
		val = h[i]->IntegralAndError(1, 35, err);
		printf("Position %d(%s - %s): Freq = %7.1f +- %4.1f mHz\n", i+1, t_period[i][0], t_period[i][1], val, err);
	}
}
